<!DOCTYPE html>
<!-- saved from url=(0061)http://booking.izhuodao.com/index.php?r=sports%2Fsale%2Findex -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
        <title>会员查询</title>
    <link href="./bootstrap.min14ed.css" rel="stylesheet">
<link href="./font-awesome.min93e3(1).css" rel="stylesheet">
<link href="./animate.min.css" rel="stylesheet">
<link href="./style.min862f(1).css" rel="stylesheet">
<link href="./laydate.css" rel="stylesheet">
<link href="./awesome-bootstrap-checkbox.css" rel="stylesheet">
<link href="./toastr.min.css" rel="stylesheet">
<link href="./chosen.css" rel="stylesheet">
<link href="./feehi.css" rel="stylesheet">
<script src="./jquery.js"></script>
<script src="./yii.js"></script>
<script src="./jquery-3.2.1.min.js"></script>
<script src="./feehi.js"></script>
<script src="./laydate.js"></script><link rel="stylesheet" href="./laydate(1).css" id="layuicss-laydate">
<script src="./layer.min(1).js"></script><link rel="stylesheet" href="./layer(1).css" id="layui_layer_skinlayercss" style="">
<script src="./bootstrap-prettyfile.js"></script>
<script src="./toastr.min.js"></script>
<script src="./chosen.jquery.js"></script>
<script src="./vue.js"></script>
<script src="./axios.min.js"></script>
<script src="./request.js"></script>    <script>
    var common = {
        deleteText: "删除"
    }
    var tips = {
        confirmTitle: "确认",
        ok: "确定",
        cancel: "取消",
        noItemSelected: "啊哦,神马都都没有选中!",
        onlyPictureCanBeSelected: "只能选择图片类型",
        success: "成功",
        error: "失败"
    };
</script>
<!--    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">-->
    <link href="./index.css" rel="stylesheet">
    <link rel="stylesheet" href="./layui.css">

<link id="layuicss-layer" rel="stylesheet" href="./layer(2).css" media="all"><link id="layuicss-skincodecss" rel="stylesheet" href="./code.css" media="all"></head>
<body class="gray-bg">
<div class="wrapper wrapper-content">
        <div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-title">
    <span style="float: left;">
        <ul class="breadcrumb"><li class="active">销售中心</li>
</ul>    </span>
    <div class="ibox-tools">
        <a class="collapse-link ui-sortable">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>
</div>
            <div class="ibox-content">
                <style>
                    select.form-control {
                        padding: 0px
                    }

                    .ibox-tab {
                        background: #fafafa;
                        padding-bottom: 0;
                    }

                    .ibox-tab .nav-tabs li a {
                        font-weight: 400;
                    }

                    .ibox-tab .nav-tabs li.active {
                        background-color: #fff;
                    }

                    .ibox-tab .nav-tabs li.active a {
                        color: #FF9C6E;
                        margin-right: 0;
                        border-bottom: 1px solid #fff;
                    }
                </style>
                <div id="J_Vue" class="ibox" style="opacity: 1;"><div class="sell-state"><div class="sell-state-step"><span class="dot active">&nbsp;</span> <p class="til">会员查询</p></div> <hr class="sell-state-line"> <div class="sell-state-step"><span class="dot">&nbsp;</span> <p class="til">选择课程</p></div> <hr class="sell-state-line"> <div class="sell-state-step"><span class="dot">&nbsp;</span> <p class="til">订单完成</p></div></div> <div class="member-search"><div class="member-search-input"><span>手机号/名称：</span> <div class="el-select"><!----><div class="el-input el-input--suffix"><!----><input type="text" autocomplete="off" placeholder="请输入手机号/用户名称" class="el-input__inner" readonly="readonly"><!----><span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-select__caret el-input__icon el-icon-"></i><!----><!----><!----><!----><!----></span><!----></span><!----><!----></div></div></div> <p class="member-search-btn"><button type="button" class="btn btn-primary">搜索
                            </button></p></div> <div class="staff-detail-head"><div class="staff-detail-head-pic"><img src="./132" alt=""></div> <div class="staff-detail-head-content"><p class="name">文~静
                                <span class="btn btn-link">查看会员信息</span></p> <p class="info"><span>性别：女</span> <span>生日：2020-11-12</span> <span>电话：15921616932</span></p> <div class="tag"><p>终身顾问：测试专员</p> <!----> <!----> <!----> <!----></div></div> <p class="staff-detail-btn"><a title="购买课程" class="btn btn-primary btn-sm"> 购买课程</a> <a class="btn btn-white btn-sm openContab ">充值</a></p></div></div>
                <script src="./index.js"></script>
                <style>
                    .staff-detail-head {
                        position: relative;
                        padding: 20px;
                        margin-bottom: 20px;
                        margin: 0 20px;
                        background-color: #fff;
                        border: 1px solid #f6f6f6;
                    }

                    .staff-detail-head-pic {
                        position: absolute;
                        top: 13px;
                        left: 10px;
                        width: 90px;
                        height: 90px;
                        border-radius: 50px;
                        overflow: hidden;
                    }

                    .staff-detail-head-pic img {
                        width: 100%;
                    }

                    .staff-detail-head-content {
                        width: 100%;
                        min-height: 80px;
                        padding: 0 40px 0 100px;
                    }

                    .staff-detail-head-content p {
                        margin-bottom: 5px;
                    }

                    .staff-detail-head-content .name {
                        font-size: 16px;
                        font-weight: bold;
                        color: #555;
                    }

                    .staff-detail-head-content .info {
                        font-size: 12px;
                        color: #aaa;
                    }

                    .tag p {
                        display: inline-block;
                        padding: 5px 8px;
                        font-size: 12px;
                        color: #fff;
                        border-radius: 6px;
                        background-color: #72e5c7;
                    }

                    .staff-detail-btn {
                        position: absolute;
                        top: 50%;
                        right: 20px;
                        margin-top: -13px;
                    }

                    .sell-state {
                        display: flex;
                        width: 500px;
                        padding: 60px 0 30px;
                        margin: 0 auto;
                    }

                    .sell-state-step {
                        width: 65px;
                        font-size: 12px;
                        color: #555;
                        text-align: center;
                    }

                    .sell-state-step .dot {
                        display: inline-block;
                        width: 12px;
                        height: 12px;
                        margin: 0 auto;
                        border-radius: 20px;
                        overflow: hidden;
                        background-color: #b3b5b7;
                    }

                    .sell-state-step .dot.active {
                        background-color: #2593fc;
                    }

                    .sell-state-line {
                        border: none;
                        height: 2px;
                        width: 188px;
                        display: inline-flex;
                        margin-top: 5px;
                        margin-left: -20px;
                        margin-right: -20px;
                        background-color: #ccc;
                    }

                    /*搜索栏*/
                    .member-search {
                        display: flex;
                        width: 440px;
                        padding: 10px 0 20px;
                        margin: 0 auto;
                    }

                    .member-search-input {
                        width: 350px;
                        display: flex;
                    }

                    .member-search-input span {
                        width: 108px;
                        line-height: 34px;
                        font-size: 12px;
                    }
                    .member-search-input input {
                        font-size: 12px;
                    }

                    .member-search-btn {
                        width: 100px;
                        text-align: right;
                    }

                    .member-search-empty {
                        width: 500px;
                        height: 460px;
                        margin: 0 auto;
                        background: url("http://ladym.oss-cn-shanghai.aliyuncs.com/izhuodao/blw/blw-empty.png") no-repeat 50% 50%;
                        -webkit-background-size: 80%;
                        background-size: 80%;
                    }

                    .member-search-empty p {
                        text-align: center;
                        font-size: 14px;
                        color: #999;
                    }
                </style>
                <script>
                    var app = new Vue({
                        el: '#J_Vue',
                        data: {
                            value: '',
                            phone: '',
                            customerDetail: {},
                            showCustomerFlag: false,
                            shopUrl:'',
                            rechargeUrl:'',
                            isSearch:false,
                            options: [],
                            loading:false,
                        },
                        mounted: function () {
                            this.$refs.inited.style.opacity=1;
                            this.remoteMethod(1);
                        },
                        methods: {
                            searchCustomer: function () {
                                let _this = this;
                                let phone = _this.phone;
                                let checkFlag = _this.checkSearchParams(phone);
                                if (!checkFlag) {
                                    return false;
                                }

                                let url = 'index.php?r=sports/customer/detail&department_id=1&phone=' + phone;
                                axios.get(url)
                                    .then(function (response) {
                                        //成功返回
                                        console.log(response.data.data);
                                        if (Object.keys(response.data.data).length > 0) {
                                            _this.customerDetail = response.data.data;
                                            _this.showCustomerFlag = true;
                                            _this.shopUrl = '/index.php?r=sports/sale/cart&customerId=' + _this.customerDetail.customerId;
                                            _this.rechargeUrl = '/index.php?r=sports/sale/recharge&department=sports&customerId=' + _this
                                                    .customerDetail.customerId;
                                        } else {
                                            _this.showCustomerFlag = false;
                                        }
                                        _this.isSearch = true;
                                    })
                                    .catch(function (error) {
                                        //失败处理
                                        console.log(error);
                                    });
                            },

                            // 去购买
                            buy: function () {
                                let link = this.shopUrl;
                                let href = $("<a href='" + link + "' title='购买课程'></a>");
                                parent.openConTab(href);
                            },

                            // 去充值
                            recharge: function () {
                                let link = this.rechargeUrl;
                                let href = $("<a href='" + link + "' title='充值'></a>");
                                parent.openConTab(href);
                            },

                            // 校验查询参数
                            checkSearchParams: function (phone) {
                                if (phone == '') {
                                    layer.msg('请输入手机号!', {icon: 2, time: 1500});
                                    return false;
                                }

                                let reg = /^1+\d{10}$/;
                                if (!reg.test(phone)) {
                                    layer.msg('请输入有效的手机号码!', {icon: 2, time: 1500});
                                    return false;
                                }

                                return true;
                            },
                            customerInfo: function (id) {
                                let link = "/index.php?r=sports%2Fcustomer%2Finfo&id=" + id + '&department_id=1';
                                let href = $("<a href='" + link + "' title='会员详情'></a>")
                                parent.openConTab(href);
                            },
                            remoteMethod: function (query) {
                                let _this = this;
                                _this.loading = true;
                                let url = 'index.php?r=sports/customer/detail&like=1&phone=' + query;
                                axios.get(url)
                                    .then(function (response) {
                                        _this.options = response.data.data;
                                        //成功返回
                                        console.log(response.data.data);
                                    })
                                    .catch(function (error) {
                                        //失败处理
                                        console.log(error);
                                    });
                                _this.loading = false;
                            }
                        }
                    })
                </script>

                
            </div>
        </div>
    </div>
</div></div>
<script src="./layui.all.js"></script>
<script src="./index.js"></script>


<div class="el-select-dropdown el-popper" style="min-width: 0px; transform-origin: center top; z-index: 2001; display: none;"><div class="el-scrollbar" style=""><div class="el-select-dropdown__wrap el-scrollbar__wrap" style="margin-bottom: -6px; margin-right: -6px;"><ul class="el-scrollbar__view el-select-dropdown__list"><!----><li class="el-select-dropdown__item"><span>大河坝子</span></li><li class="el-select-dropdown__item"><span>雨幕踱林</span></li><li class="el-select-dropdown__item"><span>一路向北。……</span></li><li class="el-select-dropdown__item"><span>唐俊-17751599862</span></li><li class="el-select-dropdown__item selected hover"><span>李文静-15921616932</span></li><li class="el-select-dropdown__item"><span>张建业-13811894824</span></li><li class="el-select-dropdown__item"><span>忆-19963218069</span></li><li class="el-select-dropdown__item"><span>进-18221549117</span></li></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="transform: translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="transform: translateY(0%);"></div></div></div><!----><div x-arrow="" class="popper__arrow" style="left: 35px;"></div></div></body></html>